var f=Object.defineProperty;var _=(c,o,e)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[o]=e;var a=(c,o,e)=>(_(c,typeof o!="symbol"?o+"":o,e),e);import{b,O as v,c as x,B as w,d as u,p as R,s as y}from"./index.4ecf1bb4.js";import{b as z}from"./baseRenderer.5ed7b0fa.js";import{d as g,r as k,b as S,g as q,c as M,o as O,_ as E}from"./index.029fba82.js";import{a as B,c as C}from"./add3DLabel.7f489610.js";import"./dat.gui.module.6914edc7.js";import"./___vite-browser-external_commonjs-proxy.cbdc8e07.js";class D extends b{constructor(e,t){super(e,t);a(this,"controls");a(this,"renderRequested",!1);a(this,"isResize",!1);a(this,"pickableObjects",[]);a(this,"confirmResize",()=>{this.isResize=!0,this.requestRenderIfNotRequested()});a(this,"render",()=>{this.renderRequested=void 0,this.controls.update(),this.renderer.render(this.scene,this.camera)});a(this,"requestRenderIfNotRequested",()=>{this.renderRequested||(this.isResize&&(this.isResize=!1,this.onWindowResize()),this.renderRequested=!0,requestAnimationFrame(this.render))});this.controls=new v(this.camera,t.domElement),this.controls.addEventListener("change",this.requestRenderIfNotRequested),window.addEventListener("resize",this.confirmResize,!1),requestAnimationFrame(this.render)}loadGltf(e,t){x(this.renderer).load(e,n=>{const d=new w().setFromObject(n.scene),r=d.getSize(new u).length(),i=d.getCenter(new u);this.controls.maxDistance=r*10,n.scene.position.x+=n.scene.position.x-i.x,n.scene.position.y+=n.scene.position.y-i.y,n.scene.position.z+=n.scene.position.z-i.z,this.cameraPositionFlag||(this.camera.position.copy(i),this.camera.position.x+=r/2,this.camera.position.y+=r/5,this.camera.position.z+=r/2,this.camera.lookAt(i),this.viewPoint=this.setViewPoint(this.camera,[i.x,i.y,i.z])),this.content=n.scene,this.scene.add(n.scene),t&&t(n.scene)},n=>{})}pickModel(e,t,s){e.traverse(n=>{if(n.isMesh){const d=n;s&&s.includes(d.name)||this.pickableObjects.push(d)}}),R(this.camera,this.container,this.pickableObjects,t)}}class L extends z{constructor(e,t){super(e,t);a(this,"sceneMap",{});a(this,"animate",()=>{this.render(),this.stats.update()})}getSceneByName(e){return this.sceneMap[e]}setCurrentScene(e){var t;e&&(this.currentScene=e,(t=this.options)!=null&&t.guiOpen&&this.updateGui())}createScene(e){if(this.sceneMap[e]==null){const t=new D(this.container,this.renderer);return t.sceneName=e,this.updateEnvironment(t.vignette),this.sceneMap[e]=t,t}}render(){this.currentScene.render()}}const P=g({__name:"example02",setup(c){let o=null,e=k(null),t,s;S(()=>{let{$refs:r}=q().proxy;o=r,e=o.base_container,t=new L(e,{guiOpen:!0,performance:!0}),n("/copper3d_examples/test.glb","test"),t.animate()});function n(r,i){if(s=t.getSceneByName(i),s==null){s=t.createScene(i);const p=()=>{window.location.href="https://linkungao.github.io/medtech-heart-vue/model-heart",document.removeEventListener("click",p)},m=["whole-body","whole-body_2","whole-body_1"];s&&(t.setCurrentScene(s),i==="test"&&s.loadGltf(r,l=>{console.log(l),t.animate(),s&&s.pickModel(l,h=>{h&&h.name==="whole-heart"?document.addEventListener("click",p):document.removeEventListener("click",p),t.animate()},m)}),s.loadViewUrl("/copper3d_examples/human_view.json"),B(s,"Digital Twins",23.47044074808355,553.7649452795513,700.421283,600,{font_size:"50px",font:"Raleway"}),s.updateBackground("#00467F","#BA4482")),y("/copper3d_examples/venice_sunset_1k.hdr"),t.updateEnvironment()}}function d(r){console.log(s);const i=C(e,s==null?void 0:s.camera,{x:r.clientX,y:r.clientY});console.log(i)}return(r,i)=>(O(),M("div",{id:"bg",ref:"base_container",onClick:d},null,512))}});const T=E(P,[["__scopeId","data-v-d3c5d69b"]]);export{T as default};
