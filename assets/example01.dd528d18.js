import{l as E,f as L,s as B}from"./index.4ecf1bb4.js";import{d as N,r as w,b as T,g as j,c as F,a as l,o as U}from"./index.029fba82.js";import{c as D}from"./copperRenderer.0080e277.js";import{a as k}from"./add3DLabel.7f489610.js";import"./dat.gui.module.6914edc7.js";import"./___vite-browser-external_commonjs-proxy.cbdc8e07.js";import"./baseRenderer.5ed7b0fa.js";const G={id:"bg",ref:"base_container"},H={class:"btn"},J=N({__name:"example01",setup(A){let f=null,n,i,e,m=[],_=w(null),v=w(null),C;T(()=>{let{$refs:r}=j().proxy;f=r,_=f.base_container,v=f.c_gui,C=E(),n=new D(_,{guiOpen:!0,camera:!0,performance:!0,light:!0}),n.closeGui(),document.addEventListener("keydown",o=>{o.code==="KeyF"&&L(_)}),n.getCurrentScene().createDemoMesh(),n.animate()});function a(r,t){if(e&&y(e),e=n.getSceneByName(t),e==null){e=n.createScene(t),m.push(e);const o=()=>{window.location.href="https://linkungao.github.io/medtech-heart-vue/model-heart",document.removeEventListener("click",o)},c=["whole-body","whole-body_2","whole-body_1"];e&&(n.setCurrentScene(e),e.controls.staticMoving=!0,t==="test"?e.loadGltf(r,u=>{e&&e.pickModel(u,s=>{s&&s.name==="whole-heart"?document.addEventListener("click",o):document.removeEventListener("click",o),s&&console.log(s.name)},c)}):e.loadGltf(r,u=>{i&&e&&e.updateCamera(i)}),t!="walk"&&(t=="fibrillation"?e.loadViewUrl("/copper3d_examples/arrythmiaActivity_view.json"):t==="test"?(e.loadViewUrl("/copper3d_examples/human_view.json"),k(e,"Digital Twins",23.47044074808355,553.7649452795513,700.421283,600,{font_size:"50px",font:"Raleway"})):(e.loadViewUrl("/copper3d_examples/noInfarct_view.json"),k(e,"left ventricle",-55.056679,-14.82123313284426,5.421283,60),k(e,"right ventricle",-44.323991175632,31.1417335930078,10.421283,60))),e.updateBackground("#5454ad","#18e5a7")),B("/copper3d_examples/footprint_court_2k.hdr"),n.updateEnvironment()}else i&&e.updateCamera(i),n.setCurrentScene(e)}function y(r){const t=[-.9551143646240234,2.91867446899414,2.7563438415527344];i=r.setViewPoint(r.camera,t)}function S(){console.log(m),i=void 0,m.forEach(r=>{r.resetView(),r.isHalfed&&console.log(r.isHalfed)})}let p=1;function h(){p+=1,e&&e.setPlayRate(p),console.log(p)}function R(){p-=1,e&&e.setPlayRate(p),console.log(p)}function x(r,t){if(e=n.getSceneByName(t),e==null){e=n.createScene(t);const o={openGui:!0,container:v},c=u=>{};e&&(n.setCurrentScene(e),e==null||e.loadNrrd(r,C,c,o),e.loadViewUrl("/copper3d_examples/nrrd_view.json"),m.push(e))}}function V(r,t){e=n.getSceneByName(t);const o="/copper3d_examples/surfaces_lv/model_participant_000_lv_demo_endo_0",c="/copper3d_examples/surfaces_lv/model_participant_000_lv_demo_epi_0";let u=[],s=[];if(e==null){if(e=n.createScene(t),e){n.setCurrentScene(e);for(let d=0;d<31;d++){let g="",b="";d<10?(g=o+"0"+d+".vtk",b=c+"0"+d+".vtk"):(g=o+d+".vtk",b=c+d+".vtk"),u.push(g),s.push(b)}e==null||e.loadVtks([{name:"heart_inner",urls:u},{name:"heart_outer",urls:s}]),e.loadViewUrl("/copper3d_examples/d_heart_view.json"),m.push(e)}}else i&&e.updateCamera(i),n.setCurrentScene(e)}function $(){if(n){const t=n.getCurrentScene().getCurrentTime();console.log(t)}}function M(){e==null||e.addPreRenderCallbackFunction($)}function P(){const t=n.getCurrentScene().getCurrentMixer();console.log(t)}return(r,t)=>(U(),F("div",G,[l("div",{ref_key:"c_gui",ref:v,id:"gui"},null,512),l("div",H,[l("button",{onClick:t[0]||(t[0]=o=>a("/copper3d_examples/heart1.gltf","health"))}," Health "),l("button",{onClick:t[1]||(t[1]=o=>a("/copper3d_examples/Minor.glb","minor"))}," Minor "),l("button",{onClick:t[2]||(t[2]=o=>a("/copper3d_examples/normalActivity.glb","normal"))}," Electricity normal "),l("button",{onClick:t[3]||(t[3]=o=>a("/copper3d_examples/Fibrillation.glb","fibrillation"))}," Fibrillation "),l("button",{onClick:t[4]||(t[4]=o=>a("/copper3d_examples/Severe.glb","severe"))}," Severe "),l("button",{onClick:t[5]||(t[5]=o=>a("/copper3d_examples/walkmodel.glb","walk"))}," Walk model "),l("button",{onClick:t[6]||(t[6]=o=>a("/copper3d_examples/test.glb","test"))}," Test "),l("button",{onClick:S},"Reset"),l("button",{onClick:h},"addPlayRate"),l("button",{onClick:R},"minusPlayRate"),l("button",{onClick:t[7]||(t[7]=o=>x("/copper3d_examples/nrrd/for-linkun/nnrd/DZET01_17871377_005.nrrd","nrrd"))}," LoadNrrd "),l("button",{onClick:t[8]||(t[8]=o=>x("/copper3d_examples/nrrd/58.nrrd","nrrd-breast1"))}," LoadNrrd-breast1 "),l("button",{onClick:t[9]||(t[9]=o=>V("/copper3d_examples/nrrd/breast.vtk","vtk-breast1"))}," LoadVtk-heart "),l("button",{onClick:M},"getTime"),l("button",{onClick:P},"getMixer")])],512))}});export{J as default};
