import{T as M,S as P,a as E,l as N,f as O,s as U}from"./index.eb258893.js";import{c as D}from"./copperRenderer.9249251b.js";import{d as F,r as h,e as H,g as G,c as z,a as r,o as A}from"./index.da25b4b4.js";import"./___vite-browser-external_commonjs-proxy.38e03bc4.js";function I(f,m,o,a,e,s){const p=document.createElement("canvas");p.width=512,p.height=512;const i=p.getContext("2d");i.textBaseline="alphabetic",i.measureText(f).width,i.fillStyle="rgb(255,255,255)",i.textAlign="center",s?i.font=s.font_size+" "+s.font:i.font="30px Helvetica",i.fillText(f,256,256),i.strokeStyle="rgb(255,255,255)",i.strokeText(f,256,256);const d=new M(p);d.needsUpdate=!0;const x=new P({map:d,color:"#ffffff"}),b=new E(x);return b.scale.set(e,e,1),b.position.set(m,o,a),b}function S(f,m,o,a,e,s,p){const i=I(m,o,a,e,s,p);f.addObject(i)}const J={class:"root"},Z={id:"bg",ref:"base_container"},K={class:"btn"},Y=F({__name:"example01",setup(f){let m=null,o,a,e,s=[],p=h(null),i=h(null),k;H(()=>{let{$refs:l}=G().proxy;m=l,p=m.base_container,i=m.c_gui,k=N(),o=new D(p,{guiOpen:!0,camera:!0,performance:!0,light:!0}),o.closeGui(),document.addEventListener("keydown",n=>{n.code==="KeyF"&&O(p)}),o.getCurrentScene().createDemoMesh(),o.animate()});function d(l,t){if(e&&x(e),e=o.getSceneByName(t),e==null){e=o.createScene(t),s.push(e);const n=()=>{window.location.href="https://linkungao.github.io/medtech-heart-vue/model-heart",document.removeEventListener("click",n)},_=["whole-body","whole-body_2","whole-body_1"];e&&(o.setCurrentScene(e),e.controls.staticMoving=!0,t==="test"?e.loadGltf(l,g=>{e&&e.pickModel(g,c=>{c&&c.name==="whole-heart"?document.addEventListener("click",n):document.removeEventListener("click",n),c&&console.log(c.name)},_)}):e.loadGltf(l,g=>{a&&e&&e.updateCamera(a)}),t!="walk"&&(t=="fibrillation"?e.loadViewUrl("/copper3d_examples/arrythmiaActivity_view.json"):t==="digital_twin"?e.loadViewUrl("/copper3d_examples/digital_view.json"):t==="test"?(e.loadViewUrl("/copper3d_examples/human_view.json"),S(e,"Digital Twins",23.47044074808355,553.7649452795513,700.421283,600,{font_size:"50px",font:"Raleway"})):(e.loadViewUrl("/copper3d_examples/noInfarct_view.json"),S(e,"left ventricle",-55.056679,-14.82123313284426,5.421283,60),S(e,"right ventricle",-44.323991175632,31.1417335930078,10.421283,60))),e.updateBackground("#5454ad","#18e5a7")),U("/copper3d_examples/footprint_court_2k.hdr"),o.updateEnvironment()}else a&&e.updateCamera(a),o.setCurrentScene(e)}function x(l){const t=[-.9551143646240234,2.91867446899414,2.7563438415527344];a=l.setViewPoint(l.camera,t)}function b(){console.log(s),a=void 0,s.forEach(l=>{l.resetView(),l.isHalfed&&console.log(l.isHalfed)})}let v=1;function $(){v+=1,e&&e.setPlayRate(v)}function j(){v-=1,e&&e.setPlayRate(v),console.log(v)}function y(l,t){if(e=o.getSceneByName(t),e==null){e=o.createScene(t),e==null||e.container.appendChild(k.loadingContainer);const n={openGui:!0,container:i},_=(g,c,u)=>{e==null||e.addObject(c.x),e==null||e.addObject(c.y),e==null||e.addObject(c.z)};e&&(o.setCurrentScene(e),e==null||e.loadNrrd(l,k,!1,_,n),e.loadViewUrl("/copper3d_examples/nrrd_view.json"),s.push(e))}}function R(l,t){e=o.getSceneByName(t),e==null?(e=o.createScene(t),e&&(o.setCurrentScene(e),e.loadOBJ(l,n=>{console.log(n)}),e.loadViewUrl("/copper3d_examples/nrrd_view.json"),s.push(e))):(a&&e.updateCamera(a),o.setCurrentScene(e))}function V(l,t){e=o.getSceneByName(t);const n="/copper3d_examples/vtks/one_frame/model_cardiohance_023_mri_DZ_endo_0",_="/copper3d_examples/vtks/one_frame/model_cardiohance_023_mri_DZ_epi_0";let g=[],c=[];if(e==null){if(e=o.createScene(t),e){o.setCurrentScene(e);for(let u=0;u<1;u++){let w="",C="";u<10?(w=n+"0"+u+".vtk",C=_+"0"+u+".vtk"):(w=n+u+".vtk",C=_+u+".vtk"),g.push(w),c.push(C)}e==null||e.loadVtks([{name:"heart_inner",urls:g,opts:{wireframe:!0,color:"#cccccc"}},{name:"heart_outer",urls:c,opts:{wireframe:!1,color:"rgb(214, 211, 212)",transparent:!0,opacity:.5}}]),e.loadViewUrl("/copper3d_examples/d_heart_view.json"),s.push(e)}}else a&&e.updateCamera(a),o.setCurrentScene(e)}function B(){if(o){const t=o.getCurrentScene().getCurrentTime();console.log(t)}}function T(){e==null||e.addPreRenderCallbackFunction(B)}function L(){const t=o.getCurrentScene().getCurrentMixer();console.log(t)}return(l,t)=>(A(),z("div",J,[r("div",Z,[r("div",{ref_key:"c_gui",ref:i,id:"gui"},null,512),r("div",K,[r("button",{onClick:t[0]||(t[0]=n=>d("/copper3d_examples/heart_2d.gltf","health"))}," Health "),r("button",{onClick:t[1]||(t[1]=n=>d("/copper3d_examples/mask.gltf","mask-glb"))}," mask glb "),r("button",{onClick:t[2]||(t[2]=n=>d("/copper3d_examples/Minor.glb","minor"))}," Minor "),r("button",{onClick:t[3]||(t[3]=n=>d("/copper3d_examples/normalActivity.glb","normal"))}," Electricity normal "),r("button",{onClick:t[4]||(t[4]=n=>d("/copper3d_examples/Fibrillation.glb","fibrillation"))}," Fibrillation "),r("button",{onClick:t[5]||(t[5]=n=>d("/copper3d_examples/Severe.glb","severe"))}," Severe "),r("button",{onClick:t[6]||(t[6]=n=>d("/copper3d_examples/walkmodel.glb","walk"))}," Walk model "),r("button",{onClick:t[7]||(t[7]=n=>d("/copper3d_examples/test.glb","test"))}," Test "),r("button",{onClick:t[8]||(t[8]=n=>d("/copper3d_examples/digital_twin.gltf","digital_twin"))}," Digital twins "),r("button",{onClick:b},"Reset"),r("button",{onClick:$},"addPlayRate"),r("button",{onClick:j},"minusPlayRate"),r("button",{onClick:t[9]||(t[9]=n=>y("/copper3d_examples/nrrd/segmentation/ax dyn pre.nrrd","nrrd"))}," LoadNrrd "),r("button",{onClick:t[10]||(t[10]=n=>y("/copper3d_examples/nrrd/breast.nrrd","nrrd-breast1"))}," LoadNrrd-breast1 "),r("button",{onClick:t[11]||(t[11]=n=>V("/copper3d_examples/nrrd/breast.vtk","vtk-breast1"))}," LoadVtk-heart "),r("button",{onClick:t[12]||(t[12]=n=>R("/copper3d_examples/mask_normals_inverted.obj","mask-mesh"))}," LoadOBJ "),r("button",{onClick:T},"getTime"),r("button",{onClick:L},"getMixer")])],512)]))}});export{Y as default};
